<style>
    body, * {
        font-family: 'TH Sarabun New', Sarabun, sans-serif !important;
        font-size: 14px;
    }
    
    table {
        font-family: 'TH Sarabun New', Sarabun, sans-serif !important;
        font-size: 13px;
    }
    
    table td, table th {
        font-family: 'TH Sarabun New', Sarabun, sans-serif !important;
    }
    
    caption {
        font-family: 'TH Sarabun New', Sarabun, sans-serif !important;
        font-size: 14px;
        font-weight: 600;
    }
    
    strong {
        font-family: 'TH Sarabun New', Sarabun, sans-serif !important;
        font-weight: 600;
    }
</style>

{# ------------------- TOTAL line = Summary of Payment Entry Reference -------------------- #}
{% if doc.doctype == 'XXX' %}
<table class="table table-bordered table-condensed">
    <caption><strong>Summary from Payment Entry Reference</strong></caption>
    <tr>
        <th></th>
        <th style="text-align:center"> Outstanding_amount</th>
        <th style="text-align:center">Allocated_amount</th>
    </tr>
    {% set outsumm = [0] %}
    {% set asumm = [0] %}
    {% for item in doc.references %}
        {% if asumm.append(asumm[-1]  + item.allocated_amount) %}{% endif %}
        {% if outsumm.append(outsumm[-1]  + item.outstanding_amount) %}{% endif %}
    {% endfor %}
    <tr>
        <td style="text-align:right"><strong>Total</strong></td>
        <td style="text-align:right"><strong>{{ frappe.utils.fmt_money(outsumm[-1]) }}</strong></td>
        <td style="text-align:right"><strong>{{ frappe.utils.fmt_money(asumm[-1]) }}</strong></td>
    </tr>
</table>
{% endif %}